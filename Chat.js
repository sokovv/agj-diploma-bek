module.exports = class Chat {
  constructor() {
    this.chats = [];
  }

  allChatList() {
    const chatList = this.chats.map(({
      id,
      event,
      message,
      date,
    }) => ({
      id,
      event,
      message,
      date,
    }));
    return chatList
  }

  addChat(event, message, date) {
    let endId = 0;
    this.chats.map((item) => {
      if (item.id > endId)
        endId = item.id;
    });
    this.chats.push({
      id: endId + 1,
      event,
      message,
      date,
    }, );
  }

  command(message) {
    if (message === '@weather') {
      let weather = ['–ì—Ä–æ–∑–∞‚ö°', '–î–æ–∂–¥—å‚òî', '–ì—Ä–∞–¥üå®', '–°–Ω–µ–≥‚ùÑ', '–í–µ—Ç–µ—Äüå¨', '–£—Ä–∞–≥–∞–Ωüå™', '–ú–µ—Ç–µ–ª—åüå´', '–ñ–∞—Ä–∞üî•', '–ü–æ—Ä–∞ –Ω–∞ –ø–ª—è–∂‚õ±', '–î—É–±–∞–∫ -50‚òÉ', '–°–æ–ª–Ω–µ—á–Ω–æüåû'];
      let item = weather[Math.floor(Math.random() * weather.length)];
      return `–ü–æ–≥–æ–¥–∫–∞ –∑–∞ –æ–∫–Ω–æ–º: ${item}`
    }

    if (message === '@poem') {
      let poem = ['–ë–µ–ª–µ–µ—Ç –ø–∞—Ä—É—Å –æ–¥–∏–Ω–æ–∫–æ–π –í —Ç—É–º–∞–Ω–µ –º–æ—Ä—è –≥–æ–ª—É–±–æ–º!..',
        '–ü–æ–¥—Ä—É–≥–∞ –¥–Ω–µ–π –º–æ–∏—Ö —Å—É—Ä–æ–≤—ã—Ö,–ì–æ–ª—É–±–∫–∞ –¥—Ä—è—Ö–ª–∞—è –º–æ—è!',
        '–ò —Å–∫—É—á–Ω–æ –∏ –≥—Ä—É—Å—Ç–Ω–æ, –∏ –Ω–µ–∫–æ–º—É —Ä—É–∫—É –ø–æ–¥–∞—Ç—å –í –º–∏–Ω—É—Ç—É –¥—É—à–µ–≤–Ω–æ–π –Ω–µ–≤–∑–≥–æ–¥—ã‚Ä¶',
        '–í—ã —Ç–∞–∫ –≤–µ–ª–∏ –ø–æ –±–µ–∑–¥–æ—Ä–æ–∂—å—é, –ö–∞–∫ –≤ –º—Ä–∞–∫ –ø–∞–¥—É—á–∞—è –∑–≤–µ–∑–¥–∞.',
        '–ó–∞–π–∫—É –±—Ä–æ—Å–∏–ª–∞ —Ö–æ–∑—è–π–∫–∞ ‚Äî –ü–æ–¥ –¥–æ–∂–¥–µ–º –æ—Å—Ç–∞–ª—Å—è –∑–∞–π–∫–∞.',
        '–ì–¥–µ –æ–±–µ–¥–∞–ª, –≤–æ—Ä–æ–±–µ–π? –í –∑–æ–æ–ø–∞—Ä–∫–µ —É –∑–≤–µ—Ä–µ–π.',
        '–°–ø–∞—Ç—å –ø–æ—Ä–∞! –£—Å–Ω—É–ª –±—ã—á–æ–∫, –õ–µ–≥ –≤ –∫–æ—Ä–æ–±–∫—É –Ω–∞ –±–æ—á–æ–∫.',
        '–ù–∞—à–∞ –¢–∞–Ω—è –≥—Ä–æ–º–∫–æ –ø–ª–∞—á–µ—Ç: –£—Ä–æ–Ω–∏–ª–∞ –≤ —Ä–µ—á–∫—É –º—è—á–∏–∫.–ñ–∞—Ä–∞üî•',
        '–ü–æ—Ä–∞ –Ω–∞ –ø–ª—è–∂‚õ±',
        '–ü–æ—Ä–∞ –≤—Å—Ç–∞–≤–∞—Ç—å... –†–µ—Å–Ω–∏—Ü –Ω–µ –≤—Å–∫–∏–Ω—É—Ç—å —Å–æ–Ω–Ω—ã—Ö.–ü–æ—Ä–∞ –≤—Å—Ç–∞–≤–∞—Ç—å...–ë—É–¥–∏–ª—å–Ω–∏–∫ —Å–∞–º –Ω–µ —Å–≤–æ–π. –í –æ–∫–Ω–æ –≥–ª—è–¥–∏—Ç –∏ —Å–µ—Ç—É–µ—Ç –ø–æ–¥—Å–æ–ª–Ω—É—Ö,–ø–æ–∫–∞—á–∏–≤–∞—è —Ä—ã–∂–µ–π –≥–æ–ª–æ–≤–æ–π.',
        '–Æ–Ω—ã–µ, —Å–≤–µ—Ç–ª—ã–µ –±—Ä–∞—Ç—å—è –°–∏–ª—ã, –≤–æ—Å—Ç–æ—Ä–≥–∞, –º–µ—á—Ç—ã, –í–∞–º —Ä–∞—Å–∫—Ä—ã–≤–∞—é –æ–±—ä—è—Ç—å—è, –°—ã–Ω –≥–æ–ª—É–±–æ–π –≤—ã—Å–æ—Ç—ã.'
      ];
      let item = poem[Math.floor(Math.random() * poem.length)];
      return `–°—Ç–∏—Ö –æ—Ç –±–æ—Ç–∞: ${item}`
    }

    if (message === '@time') {
      const dateFormat = new Date();
      const timeOptions = {
        minute: '2-digit',
        hour: '2-digit',
      };
      return `–ü–æ–ª–∞–≥–∞—é —Ç—ã –æ—Ç–∫–ª—é—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–∑ —Å–ø—Ä–∞—à–∏–≤–∞–µ—à—å –≤—Ä–µ–º—è, –≤–æ—Ç —Ç–µ–±–µ –≤—Ä–µ–º—è: ${dateFormat.toLocaleString('ru-RU', timeOptions)}`
    }
  }
}